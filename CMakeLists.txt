cmake_minimum_required(VERSION 3.1)
project(paulplugin)


set(CMAKE_CXX_FLAGS -Wl,--no-as-needed)
add_compile_options(-Wno-error=deprecated-declarations)
set(CMAKE_BUILD_TYPE RelWithDebInfo CACHE STRING "FORCE VALUE" FORCE)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS OFF)
set(CMAKE_CUDA_COMPILER /usr/local/cuda/bin/nvcc CACHE STRING "FORCE VALUE" FORCE)

#SOFA settings
set(SOFA_BUILD_TESTS ON CACHE BOOL "FORCE VALUE" FORCE)
set(SOFA_BUILD_METIS ON CACHE BOOL "FORCE VALUE" FORCE)
set(SOFA_USE_MASK OFF CACHE BOOL "FORCE VALUE" FORCE)
set(APPLICATION_MODELER OFF CACHE BOOL "FORCE VALUE" FORCE)
set(SOFA_BUILD_SCENECREATOR OFF CACHE BOOL "FORCE VALUE" FORCE)
set(SOFAGUI_ENABLE_QWT OFF CACHE BOOL "FORCE VALUE" FORCE)
set(PLUGIN_SOFAPYTHON ON CACHE BOOL "FORCE VALUE" FORCE)
set(PLUGIN_IMAGE OFF CACHE BOOL "FORCE VALUE" FORCE)
set(PLUGIN_DIFFUSIONSOLVER OFF CACHE BOOL "FORCE VALUE" FORCE)
set(PLUGIN_CGALPLUGIN OFF CACHE BOOL "FORCE VALUE" FORCE)
set(SOFATERMINAL_BUILD_BINDINGS OFF CACHE BOOL "FORCE VALUE" FORCE)


#Personal plugins
##### CUDA #####
set(SOFACUDA_CUBLAS ON  CACHE BOOL "FORCE VALUE" FORCE)
set(SOFACUDA_DOUBLE ON  CACHE BOOL "FORCE VALUE" FORCE)
set(PLUGIN_SOFACUDA ON  CACHE BOOL "FORCE VALUE" FORCE)


set_target_properties(SofaCUDA PROPERTIES CUDA_ARCHITECTURES "sm_8.6")

